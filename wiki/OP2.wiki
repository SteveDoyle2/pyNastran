#summary Usage of the Op2 Reader

= Introduction =

This is how the version 0.2 OP2 reading software works if you're interested.  *Don't try and use the version 0.1 software unless you have a very simple CQUAD4 static model.*

= Details =


{{{

from pyNastran.op2.op2 import OP2

# the OP2 is loaded
op2Obj = OP2('fem.op2')  # instantiates the object
op2Obj.readOP2()

# lets print the results
print op2Obj.printResults() # prints ALL results from ALL tables

# It prints the following formatted results
---ALL RESULTS---
iSubcase = 1
---DISPLACEMENTS---
nodeID           Dx         Dy         Dz         Rx         Ry         Rz 
1        -1.111e-01 -1.111e-01  1.111e-01 -1.111e-03 -1.111e-02 -1.111e-02 
2        -1.111e-02  1.111e+00 -1.111e-01  1.111e-05 -1.111e-03 -1.111e-02 


iSubcase = 200
---DISPLACEMENTS---
nodeID           Dx         Dy         Dz         Rx         Ry         Rz 
1         1.111e+01 -1.111e-02  1.111e+01 -1.111e-03 -1.111e+00 -2.378e-02 
2         1.111e+01  1.111e-03 -1.111e+02  1.111e-04 -1.111e+00          0 

iSubcase = 1
---CELASx STRESSES---
EID     eType     stress 
10001  CELAS1          0 
10002  CELAS2          0 

iSubcase = 200
---CELASx STRESSES---
EID     eType     stress 
10001  CELAS1          0 
10002  CELAS2          0 

iSubcase = 1
---CELASx STRAINS---
EID     eType     strains
10001  CELAS1          0 
10002  CELAS2          0 

iSubcase = 200
---CELASx STRAINS---
EID     eType     strains
10001  CELAS1          0 
10002  CELAS2          0 


iSubcase = 1
---ISOTROPIC PLATE STRESS---
EID     eType   nodeID  iLayer        oxx        oyy        txy     majorP     minorP       oVonMises
1      CTRIA3        C       1      -4444      -9999       1111      -2222      -1000       6666
1      CTRIA3        C       2        888       7777        222       3333        555       7777 
1      CQUAD4        1       1        888       7777        222       3333        555       7777 
1      CQUAD4        1       2        888       7777        222       3333        555       7777 
1      CQUAD4        2       1        888       7777        222       3333        555       7777 
1      CQUAD4        2       2        888       7777        222       3333        555       7777 
1      CQUAD4        3       1        888       7777        222       3333        555       7777 
1      CQUAD4        3       2        888       7777        222       3333        555       7777 
1      CQUAD4        4       1        888       7777        222       3333        555       7777 
1      CQUAD4        4       2        888       7777        222       3333        555       7777 

### NOTE "C" for nodeID means Centroid.
### NOTE iLayer=1,2 for an isotropic material means Z1/Z2 (Top Half/Bottom Half).

# lets print all the plate stress only (static loading only)
# and then print oxx and ovm (x-stress and von mises stress)
# you can use this instead to process the data (e.g. calculate margins)

for iSubcase,stressCase in op2Obj.plateStress.items():
    print stressCase
    for eid in stressCase:
        for iLayer in range(len(stressCase[eid])):
            print "oxx =",stressCase[eid][iLayer].oxx
            print "ovm =",stressCase[eid][iLayer].ovmShear

# To get ONLY plate stress for subcase 1:
stressSubcase1 = op2Obj.plateStress[1]

# to check if the results contains Von Mises Stress or max Shear Stress
# look at the printout or in code...
isVM = stressSubcase1.isVonMises() # returns True/False
isMaxShear = stressSubcase1.isMaxShear() # returns True/False

# to check if the results contains Fiber / Curvature (composites only)
# look at the printout or in code...
isFiber = stressSubcase1.isFiberDistance() # returns True/False
isCurvature = stressSubcase1.isCurvature() # returns True/False

# we know by looking at the printout, but we can also query the object 
# to find out if is transient stress or not; this works for all result objects
isTransient = stressSubcase1.isTransient # returns True/False


# If stress looked like this instead...
iSubcase = 1
---ISOTROPIC PLATE STRESS---
EID     eType   nodeID  iLayer        oxx        oyy        txy     majorP     minorP       oVonMises 
dt = 0.1
1      CTRIA3        C       1      -4444      -9999       1111      -2222      -1000       6666
1      CTRIA3        C       2        888       7777        222       3333        555       7777 

dt = 0.2
1      CTRIA3        C       1      -4444      -9999       1111      -2222      -1000       6666
1      CTRIA3        C       2        888       7777        222       3333        555       7777 

# I'll use the transient version instead (print still works the same)
# only accessing the data changes
for iSubcase,stressCase in op2Obj.plateStress.items():
    print stressCase
    for dt,stress in sorted(stressCase.items()):
        print "dt = ",dt
        for eid in stressCase:
            for iLayer in range(len(stressCase[dt][eid])):
                print "oxx =",stressCase[dt][eid][iLayer].oxx
                print "ovm =",stressCase[dt][eid][iLayer].ovmShear


##Some other elements...

iSubcase = 1
---COMPOSITE PLATE STRESS---
EID       eType   iLayer        o11        o22        t12        t1z        t2z  oVonMises 
1001    QUAD4LC        1       1729       1273        667          0          0        705 
1211    TRIA3LC       20      -5397      -1694      -1453          0          0       2353 

## for a QUAD4LC, the stress only exists at the center of the element

iSubcase = 1
---COMPOSITE PLATE STAIN---
EID       eType   iLayer        e11        e22        e12        e1z        e2z  eVonMises 
1001    QUAD4LC        1    0.00011   9.19e-05   6.02e-05          0          0   6.28e-05 

iSubcase = 1
---COMPOSITE PLATE STAIN---
EID       eType   iLayer        e11        e22        e12        e1z        e2z  eMaxShear 
1001    QUAD4LC        1    0.00011   9.19e-05   6.02e-05          0          0   6.28e-05 

# note that in the top first composite strain example, eVonMises is
# used, while in the second eMaxShear is used.  isVonMises() will 
# evaluate to False

iSubcase = 1
---BAR STRAIN---
EID       eType         e1         e2         e3         e4      Axial       eMax       eMin 
22052      CBAR   -0.00062    0.00017   0.000534  -0.000583  -0.000525   8.99e-06   -0.00114 
                  -0.00115   0.000809   0.000555   -0.00118              0.000284    -0.0017 
iSubcase = 1
---BAR STRESS---
EID     eType     s1     s2     s3     s4  Axial   sMax   sMin 
22052    CBAR  -6383   1754   5502  -6008  -5409     92 -11793 
              -11870   8336   5718 -12132          2927 -17542 

}}}